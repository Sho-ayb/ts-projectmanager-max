(()=>{"use strict";function e(e,t,r){const i=r.value;return{configurable:!0,enumerable:!1,get(){return i.bind(this)}}}class t{constructor(e,t,r,i){this.templateElement=void 0,this.hostElement=void 0,this.element=void 0,this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const n=document.importNode(this.templateElement.content,!0);this.element=n.firstElementChild,this.element.id=i,this.attach(r)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}let r=function(e){return e[e.Active=0]="Active",e[e.Finished=1]="Finished",e}({});class i{constructor(e,t,r,i,n){this.id=e,this.title=t,this.description=r,this.numOfPeople=i,this.status=n}}class n{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class s extends n{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new s),this.instance}addProject(e,t,n){const s=Math.random().toString(),o=new i(s,e,t,n,r.Active);this.projects.push(o),this.updateListeners()}moveProject(e,t){const r=this.projects.find((t=>t.id===e));r&&r.status!==t&&(r.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}s.instance=void 0;const o=s.getInstance();function l(e){let t=!0,r="";return e.required&&(t=t&&0!==e.value.toString().trim().length,t||(r="Title is required")),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.toString().length>e.minLength,t||(r=`Minimum length should be ${e.minLength} characters.`)),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.toString().length<=e.maxLength,e.maxLength||(r=`Maximum length should be ${e.maxLength} characters.`)),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min,t||(r=`Minimum value should be ${e.min}.`)),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max,t||(r=`Maximum value should be ${e.max}.`)),t?null:r}function a(e){const t=document.querySelector(".modal"),r=document.querySelector(".overlay"),i=document.querySelector(".modal__description"),n=document.querySelector(".btn-close-modal");function s(){t.classList.add("hidden"),r.classList.add("hidden")}e&&(t.classList.remove("hidden"),r.classList.remove("hidden"),i.textContent=e),n.addEventListener("click",s),r.addEventListener("click",s)}var c;let d=(u=(c=class extends t{constructor(){super("project__input","app",!0,"user__input"),this.titleInputEl=void 0,this.descriptionEl=void 0,this.peopleEl=void 0,this.hostElement.className="[ space-around-sm flex-center flex-column ]",this.configure()}configure(){this.titleInputEl=this.element.querySelector("#title"),this.descriptionEl=this.element.querySelector("#description"),this.peopleEl=this.element.querySelector("#people"),this.element.addEventListener("submit",(e=>{try{this.submitHandler(e)}catch(e){e instanceof Error&&a(`${e.message}`)}}))}renderContent(){}clearInputs(){this.titleInputEl.value=this.descriptionEl.value=this.peopleEl.value=""}submitHandler(e){e.preventDefault();try{const e=this.gatherUserInputs();if(Array.isArray(e)){const[t,r,i]=e;o.addProject(t,r,i)}this.clearInputs()}catch(e){if(e instanceof Error)throw e}}gatherUserInputs(){const e=this.titleInputEl.value,t=this.descriptionEl.value,r=this.peopleEl.value,i={value:t,required:!0,minLength:5},n={value:+r,required:!0,min:1,max:5},s=l({value:e,required:!0,minLength:5}),o=l(i),a=l(n);if(s||o||a)throw new Error(`\n      \n      Please enter a valid input:\n      ${s?`Title: ${s}`:""} \n      ${o?`Description: ${o}`:""}\n      ${a?`Number of people: ${a}`:""}\n    \n    `);return[e,t,+r]}}).prototype,p="submitHandler",h=[e],m=Object.getOwnPropertyDescriptor(c.prototype,"submitHandler"),v=c.prototype,g={},Object.keys(m).forEach((function(e){g[e]=m[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=h.slice().reverse().reduce((function(e,t){return t(u,p,e)||e}),g),v&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(v):void 0,g.initializer=void 0),void 0===g.initializer&&Object.defineProperty(u,p,g),c);var u,p,h,m,v,g,y;function f(e,t,r,i,n){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}let j=(f((y=class extends t{get persons(){return 1===this.project.numOfPeople?"1 person":`${this.project.numOfPeople} persons`}constructor(e,t,r){super("single__project",e,!1,t.id),this.project=void 0,this.type=void 0,this.project=t,this.type=r,this.configure(),this.renderContent()}dragStartHandler(e){this.element.classList.add("dragging"),e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}configure(){this.element.classList.add("project__list__item"),this.element.classList.add(`project__list__item--${this.type}`),this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons+" assigned",this.element.querySelector("p").textContent=this.project.description}}).prototype,"dragStartHandler",[e],Object.getOwnPropertyDescriptor(y.prototype,"dragStartHandler"),y.prototype),f(y.prototype,"dragEndHandler",[e],Object.getOwnPropertyDescriptor(y.prototype,"dragEndHandler"),y.prototype),y);var E;function b(e,t,r,i,n){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}let _=(b((E=class extends t{constructor(e){super("project__list","app",!1,"section__projects"),this.type=e,this.assignedProjects=void 0,this.assignedProjects=[],o.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===r.Active:e.status===r.Finished));this.assignedProjects=t,this.renderProject()})),this.configure(),this.renderContent()}dragOverHandler(e){if(e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]){e.preventDefault();this.element.querySelector(`.project__list--${this.type}`).classList.add("dragging")}}dropHandler(e){const t=e.dataTransfer.getData("text/plain");o.moveProject(t,"active"===this.type?r.Active:r.Finished),document.querySelectorAll(".project__list").forEach((e=>{e.classList.remove("dragging")}))}dragLeaveHandler(e){this.element.querySelector(`.project__list--${this.type}`).classList.remove("dragging")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler)}renderContent(){const e=`project__header--${this.type}`,t=`project__list project__list--${this.type}`,r=`${this.type}__project__list`;this.element.querySelector("header").className=e,this.element.querySelector("ul").id=r,this.element.querySelector("ul").className=t,this.element.querySelector("h2").textContent=`${this.type.toUpperCase()} PROJECTS`,this.element.querySelector("h3").textContent=`DRAG & DROP YOUR PROJECT TO ${"active"===this.type?"FINISHED":"ACTIVE"} LIST`}renderProject(){const e=document.querySelector(`.project__list--${this.type}`);if(e){e.textContent="";for(const e of this.assignedProjects){const t=this.element.querySelector("ul").id;new j(t,e,this.type)}}}}).prototype,"dragOverHandler",[e],Object.getOwnPropertyDescriptor(E.prototype,"dragOverHandler"),E.prototype),b(E.prototype,"dropHandler",[e],Object.getOwnPropertyDescriptor(E.prototype,"dropHandler"),E.prototype),b(E.prototype,"dragLeaveHandler",[e],Object.getOwnPropertyDescriptor(E.prototype,"dragLeaveHandler"),E.prototype),E);(()=>{try{new d,new _("active"),new _("finished")}catch(e){e instanceof Error&&a(`Error: ${e.message}`)}})()})();